(()=>{var e={};e.id=833,e.ids=[833],e.modules={29:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ahiya/Ahiya/full_projects/mafia-ai-frontend/src/app/play/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ahiya/Ahiya/full_projects/mafia-ai-frontend/src/app/play/page.tsx","default")},424:(e,t,s)=>{"use strict";s.d(t,{SocketProvider:()=>r});var a=s(2907);(0,a.registerClientReference)(function(){throw Error("Attempted to call useSocket() from the server but useSocket is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ahiya/Ahiya/full_projects/mafia-ai-frontend/src/lib/socket-context.tsx","useSocket");let r=(0,a.registerClientReference)(function(){throw Error("Attempted to call SocketProvider() from the server but SocketProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ahiya/Ahiya/full_projects/mafia-ai-frontend/src/lib/socket-context.tsx","SocketProvider")},647:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ea});var a=s(687),r=s(3210),i=s(8920),l=s(9184),n=s(9377);let c=(0,n.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),o=(0,n.A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),d=(0,n.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),m=(0,n.A)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),x=(0,n.A)("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),h=(0,n.A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),u=(0,n.A)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),p=(0,n.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g=(0,n.A)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var y=s(6073),b=s(2944);let f=(0,n.A)("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);var j=s(2420);let v=(0,n.A)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),N=(0,n.A)("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);var w=s(474),k=s(5814),A=s.n(k),P=s(1366);let S=(0,n.A)("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),C=(0,n.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function M({player:e,isCurrentPlayer:t,currentSpeaker:s,showRole:r}){return(0,a.jsxs)(l.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`
        player-card relative overflow-hidden
        ${t?"ring-2 ring-blue-400":""}
        ${s?"ring-2 ring-orange-400 ring-pulse":""}
        ${!e.isAlive?"eliminated":"alive"}
        ${r&&e.role?(()=>{switch(e.role){case"mafia_leader":case"mafia_member":return"border-red-500 bg-red-500/10";case"healer":return"border-green-500 bg-green-500/10";case"citizen":return"border-blue-500 bg-blue-500/10";default:return"border-gray-500 bg-gray-500/10"}})():""}
      `,children:[s&&(0,a.jsx)(l.P.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},className:"absolute top-2 right-2 w-3 h-3 bg-orange-400 rounded-full"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:`
            w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold
            ${"ai"===e.type?"bg-orange-500/20 text-orange-400":"bg-blue-500/20 text-blue-400"}
          `,children:"ai"===e.type?(0,a.jsx)(S,{className:"w-5 h-5"}):(0,a.jsx)(C,{className:"w-5 h-5"})}),!e.isAlive&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(f,{className:"w-2 h-2 text-white"})})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:`font-medium truncate ${!e.isAlive?"text-gray-500":"text-white"}`,children:e.name}),t&&(0,a.jsx)("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded",children:"You"})]}),r&&e.role&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(()=>{switch(e.role){case"mafia_leader":return(0,a.jsx)(b.A,{className:"w-4 h-4"});case"mafia_member":return(0,a.jsx)(f,{className:"w-4 h-4"});case"healer":return(0,a.jsx)(j.A,{className:"w-4 h-4"});case"citizen":return(0,a.jsx)(y.A,{className:"w-4 h-4"});default:return null}})(),(0,a.jsx)("span",{className:"text-xs capitalize",children:e.role.replace("_"," ")})]}),"ai"===e.type&&(0,a.jsx)("div",{className:"text-xs text-orange-400 mt-1",children:"AI Player"})]}),s&&(0,a.jsx)(h,{className:"w-4 h-4 text-orange-400 animate-pulse"})]}),e.votedFor&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["Voted for: ",(0,a.jsx)("span",{className:"text-red-400",children:e.votedFor})]})]})}let _=(0,n.A)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),E=(0,n.A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function D({messages:e,players:t,gamePhase:s,canSendMessage:n}){let[c,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),{sendMessage:x}=(0,P.F)(),h=(0,r.useRef)(null),u=()=>{c.trim()&&n&&(x(c),o(""))},p=e=>{o(t=>t+e),m(!1)},g=e=>t.find(t=>t.id===e)?.name||"Unknown",y=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(0,a.jsx)(i.N,{children:e.map(e=>(0,a.jsxs)(l.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`message ${"system"===e.messageType?"system":""}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"font-semibold text-sm",children:"system"===e.messageType?"\uD83C\uDFAE System":g(e.playerId)}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:y(e.timestamp)})]}),(0,a.jsx)("div",{className:"text-gray-200",children:e.content})]},e.id))}),(0,a.jsx)("div",{ref:h})]}),(0,a.jsx)("div",{className:"border-t border-gray-700 p-4",children:n?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())},placeholder:"Type your message...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white resize-none focus:outline-none focus:border-blue-500",rows:1,maxLength:500}),(0,a.jsx)("button",{onClick:()=>m(!d),className:"absolute right-2 top-2 p-1 hover:bg-gray-700 rounded",children:(0,a.jsx)(_,{className:"w-4 h-4 text-gray-400"})}),d&&(0,a.jsx)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"absolute bottom-full right-0 mb-2 glass-card p-3",children:(0,a.jsx)("div",{className:"grid grid-cols-6 gap-2",children:["\uD83D\uDE00","\uD83D\uDE02","\uD83E\uDD14","\uD83D\uDE31","\uD83E\uDD28","\uD83D\uDE20","\uD83D\uDC4D","\uD83D\uDC4E","❤️","\uD83D\uDC80","\uD83D\uDD75️‍♂️","\uD83C\uDFAF"].map(e=>(0,a.jsx)("button",{onClick:()=>p(e),className:"p-2 hover:bg-gray-700 rounded text-lg",children:e},e))})})]}),(0,a.jsx)("button",{onClick:u,disabled:!c.trim(),className:"btn-detective px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(E,{className:"w-4 h-4"})})]}):(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:"discussion"===s?"Wait for your turn to speak":"Discussion not active"})})]})}let T=(0,n.A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),I=(0,n.A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),z=(0,n.A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);function R({phase:e}){let t=(()=>{switch(e){case"waiting":return{icon:(0,a.jsx)(d,{className:"w-5 h-5"}),name:"Waiting",color:"text-gray-400",bg:"bg-gray-500/20"};case"night":return{icon:(0,a.jsx)(T,{className:"w-5 h-5"}),name:"Night",color:"text-purple-400",bg:"bg-purple-500/20"};case"revelation":return{icon:(0,a.jsx)(I,{className:"w-5 h-5"}),name:"Revelation",color:"text-yellow-400",bg:"bg-yellow-500/20"};case"discussion":return{icon:(0,a.jsx)(v,{className:"w-5 h-5"}),name:"Discussion",color:"text-blue-400",bg:"bg-blue-500/20"};case"voting":return{icon:(0,a.jsx)(N,{className:"w-5 h-5"}),name:"Voting",color:"text-orange-400",bg:"bg-orange-500/20"};case"game_over":return{icon:(0,a.jsx)(z,{className:"w-5 h-5"}),name:"Game Over",color:"text-green-400",bg:"bg-green-500/20"};default:return{icon:(0,a.jsx)(d,{className:"w-5 h-5"}),name:"Unknown",color:"text-gray-400",bg:"bg-gray-500/20"}}})();return(0,a.jsxs)(l.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`flex items-center gap-2 px-3 py-1 rounded-full ${t.bg} ${t.color}`,children:[(0,a.jsx)(l.P.div,{animate:{rotate:360*("night"===e)},transition:{duration:2,repeat:"night"===e?1/0:0},children:t.icon}),(0,a.jsx)("span",{className:"font-semibold",children:t.name})]},e)}let q=(0,n.A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function V({players:e,currentVoter:t,onVoteAction:s}){let[i,n]=(0,r.useState)(""),[c,o]=(0,r.useState)("");return t?(0,a.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(N,{className:"w-12 h-12 text-orange-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"Cast Your Vote"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Choose who you think should be eliminated"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Who do you want to eliminate?"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:e.map(e=>(0,a.jsx)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(e.id),className:`
                p-3 rounded-lg border-2 transition-all text-left
                ${i===e.id?"border-orange-500 bg-orange-500/20 text-orange-400":"border-gray-600 bg-gray-800 hover:border-gray-500"}
              `,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),"ai"===e.type&&(0,a.jsx)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded",children:"AI"})]})},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Explain your reasoning"}),(0,a.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),placeholder:"Why do you think this player should be eliminated?",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white resize-none focus:outline-none focus:border-orange-500",rows:3,maxLength:200}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[c.length,"/200 characters"]})]}),(0,a.jsxs)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{i&&c.trim()&&(s(i,c),n(""),o(""))},disabled:!i||!c.trim(),className:"w-full btn-detective py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,a.jsx)(q,{className:"w-5 h-5"}),"Cast Vote to Eliminate"]}),i&&c.trim()&&(0,a.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"glass-card p-3 text-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"You are voting to eliminate: "}),(0,a.jsx)("span",{className:"text-orange-400 font-semibold",children:e.find(e=>e.id===i)?.name})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(N,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Voting Phase"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Wait for your turn to vote"})]})}let $=(0,n.A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);function G({role:e,players:t,onActionPerformed:s}){let[i,n]=(0,r.useState)(""),c="mafia_leader"===e?{icon:(0,a.jsx)(f,{className:"w-12 h-12 text-red-400"}),title:"Choose Your Target",description:"Select a player to eliminate tonight",buttonText:"Eliminate Player",buttonClass:"btn-danger",color:"red"}:{icon:(0,a.jsx)(j.A,{className:"w-12 h-12 text-green-400"}),title:"Choose Who to Protect",description:"Select a player to protect from elimination",buttonText:"Protect Player",buttonClass:"btn-detective",color:"green"};return(0,a.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(T,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),(0,a.jsx)("div",{className:"mb-4",children:c.icon}),(0,a.jsx)("h3",{className:"text-2xl font-bold mb-2",children:c.title}),(0,a.jsx)("p",{className:"text-gray-400",children:c.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Available targets:"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3 max-h-48 overflow-y-auto",children:t.map(e=>(0,a.jsx)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(e.id),className:`
                p-3 rounded-lg border-2 transition-all text-left
                ${i===e.id?`border-${c.color}-500 bg-${c.color}-500/20 text-${c.color}-400`:"border-gray-600 bg-gray-800 hover:border-gray-500"}
              `,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)($,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-medium",children:e.name}),"ai"===e.type&&(0,a.jsx)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded",children:"AI"})]})},e.id))})]}),(0,a.jsxs)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{i&&(s("mafia_leader"===e?"kill":"heal",i),n(""))},disabled:!i,className:`w-full ${c.buttonClass} py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`,children:[c.icon,c.buttonText]}),i&&(0,a.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"glass-card p-3 text-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Target selected: "}),(0,a.jsx)("span",{className:`text-${c.color}-400 font-semibold`,children:t.find(e=>e.id===i)?.name})]})]})}var H=s(4286),F=s(6937),O=s(5479),W=s(7590);function U({onGameStartAction:e}){let[t,s]=(0,r.useState)(""),[i,n]=(0,r.useState)(""),[c,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)("single"),[u,p]=(0,r.useState)(!1),{createRoom:g,joinRoom:f,isConnected:j}=(0,P.F)(),v=async()=>{if(!t.trim())return void W.Ay.error("Please enter your name");if(t.trim().length<2)return void W.Ay.error("Name must be at least 2 characters");o(!0);try{g(t.trim(),{premiumModelsEnabled:u,gameMode:x}),e()}catch(e){W.Ay.error("Failed to create room"),o(!1)}},N=async()=>{if(!t.trim())return void W.Ay.error("Please enter your name");if(!i.trim())return void W.Ay.error("Please enter room code");if(6!==i.trim().length)return void W.Ay.error("Room code must be 6 digits");m(!0);try{f(i.toUpperCase(),t.trim()),e()}catch(e){W.Ay.error("Failed to join room"),m(!1)}},k=[{id:"single",name:"Single Player",description:"1 Human + 9 AI Players",icon:(0,a.jsx)(b.A,{className:"w-6 h-6"}),recommended:!0,features:["Perfect for beginners","Practice AI detection","Instant start"]},{id:"multiplayer",name:"Multiplayer",description:"2-10 Humans + AI Fill",icon:(0,a.jsx)(y.A,{className:"w-6 h-6"}),recommended:!1,features:["Play with friends","Dynamic AI backfill","Social experience"]}];return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,a.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,a.jsxs)(l.P.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)(l.P.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},children:(0,a.jsx)(w.default,{src:"/detective-logo.png",alt:"AI Mafia Detective",width:80,height:80,className:"drop-shadow-2xl"})})}),(0,a.jsx)("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:(0,a.jsx)("span",{className:"text-gradient",children:"Ready to Play?"})}),(0,a.jsx)("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Join the ultimate social deduction experience with AI personalities"})]}),(0,a.jsxs)(l.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Choose Your Game Mode"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:k.map(e=>(0,a.jsxs)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(e.id),className:`
                  game-card text-left p-6 transition-all
                  ${x===e.id?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-blue-400"}
                `,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:`p-2 rounded-lg ${x===e.id?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-400"}`,children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:e.name}),e.recommended&&(0,a.jsx)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded mt-1 inline-block",children:"Recommended"})]})]}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:e.description}),(0,a.jsx)("div",{className:"space-y-2",children:e.features.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(H.A,{className:"w-3 h-3 text-blue-400"}),(0,a.jsx)("span",{children:e})]},t))})]},e.id))})]}),(0,a.jsxs)(l.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-card p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold mb-3",children:"Your Detective Name"}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"Enter your name (2-20 characters)",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white text-lg focus:outline-none focus:border-blue-500 transition-colors",maxLength:20,disabled:c||d}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"This name will be visible to other players"})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-800/50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(S,{className:"w-5 h-5 text-orange-400"}),(0,a.jsx)("span",{className:"font-semibold",children:"Premium AI Models"}),(0,a.jsx)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded",children:"Beta"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Enable Claude Sonnet 4, GPT-4o, and Gemini 2.5 Pro for enhanced AI personalities"})]}),(0,a.jsx)("button",{onClick:()=>p(!u),className:`
                  relative w-14 h-8 rounded-full transition-colors
                  ${u?"bg-blue-500":"bg-gray-600"}
                `,children:(0,a.jsx)(l.P.div,{animate:{x:u?24:4},className:"absolute top-1 w-6 h-6 bg-white rounded-full"})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(F.A,{className:"w-5 h-5 text-green-400"}),"Create New Game"]}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Start a new room and invite friends with a room code"}),(0,a.jsx)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,disabled:!t.trim()||!j||c,className:"w-full btn-detective py-4 text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"loading-dots",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]}),"Creating Room..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.A,{className:"w-5 h-5"}),"Create & Start Playing"]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"w-5 h-5 text-blue-400"}),"Join Existing Game"]}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Enter a 6-digit room code to join a friend's game"}),(0,a.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value.toUpperCase()),placeholder:"ROOM CODE",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-center text-2xl font-mono tracking-widest focus:outline-none focus:border-blue-500 transition-colors",maxLength:6,disabled:c||d}),(0,a.jsx)(l.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:N,disabled:!t.trim()||!i.trim()||!j||d,className:"w-full btn-secondary py-4 text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"loading-dots",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]}),"Joining Room..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{className:"w-5 h-5"}),"Join Game"]})})]})]}),!j&&(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"}),"Not connected to game server"]})})]}),(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-8 text-center text-gray-500 text-sm",children:(0,a.jsx)("p",{children:"\uD83D\uDD75️‍♂️ AI players are disguised with human names • \uD83E\uDD16 Can you detect them all?"})})]})})}let L=(0,n.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Y({gameState:e,currentPlayer:t,onCloseAction:s}){let r=(()=>{let t=e.players.length,s=e.players.filter(e=>e.isAlive).length,a=e.eliminatedPlayers.length,r=e.players.filter(e=>"ai"===e.type).length,i=e.players.filter(e=>"human"===e.type).length,l=e.players.filter(e=>"mafia_leader"===e.role||"mafia_member"===e.role),n=l.filter(e=>e.isAlive).length,c=new Date(e.phaseStartTime),o=Math.floor((new Date().getTime()-c.getTime())/1e3/60);return{totalPlayers:t,alivePlayers:s,eliminatedPlayers:a,aiPlayers:r,humanPlayers:i,aliveMafia:n,totalMafia:l.length,gameDuration:o,currentRound:e.currentRound,totalMessages:e.messages?.length||0,totalVotes:e.votes?.length||0}})(),n=e=>{switch(e){case"mafia_leader":return(0,a.jsx)(b.A,{className:"w-4 h-4 text-red-400"});case"mafia_member":return(0,a.jsx)(f,{className:"w-4 h-4 text-red-400"});case"healer":return(0,a.jsx)(j.A,{className:"w-4 h-4 text-green-400"});case"citizen":return(0,a.jsx)(y.A,{className:"w-4 h-4 text-blue-400"});default:return null}},c=e.winner?{winner:e.winner,icon:"citizens"===e.winner?"\uD83D\uDC6E‍♂️":"\uD83D\uDD74️",color:"citizens"===e.winner?"text-blue-400":"text-red-400",message:"citizens"===e.winner?"Citizens successfully identified the mafia!":"Mafia achieved numerical superiority!"}:null;return(0,a.jsx)(i.N,{children:(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s,children:(0,a.jsxs)(l.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"glass-card w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(z,{className:"w-8 h-8 text-orange-400"}),(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Game Statistics"})]}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:(0,a.jsx)(L,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-8",children:[c&&(0,a.jsxs)(l.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center p-6 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl border border-orange-500/30",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:c.icon}),(0,a.jsx)("h3",{className:`text-3xl font-bold mb-2 ${c.color}`,children:"citizens"===c.winner?"Citizens Win!":"Mafia Wins!"}),(0,a.jsx)("p",{className:"text-gray-300",children:c.message})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,a.jsx)(d,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:r.currentRound}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Rounds"})]}),(0,a.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,a.jsx)(y.A,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-400",children:r.alivePlayers}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Alive"})]}),(0,a.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,a.jsx)(v,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:r.totalMessages}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Messages"})]}),(0,a.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,a.jsx)(N,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-400",children:r.totalVotes}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Votes Cast"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"w-5 h-5 text-blue-400"}),"Player Status"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:e.players.map(e=>(0,a.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg ${e.isAlive?"bg-gray-700/50":"bg-red-900/20"}`,children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[n(e.role||""),(0,a.jsx)("span",{className:`font-medium ${e.isAlive?"text-white":"text-gray-500"}`,children:e.name}),e.id===t?.id&&(0,a.jsx)("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded",children:"You"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["ai"===e.type&&(0,a.jsx)(S,{className:"w-4 h-4 text-orange-400"}),(0,a.jsx)("span",{className:`text-xs px-2 py-1 rounded ${e.isAlive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:e.isAlive?"Alive":"Eliminated"})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)($,{className:"w-5 h-5 text-orange-400"}),"Game Breakdown"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Human Players:"}),(0,a.jsx)("span",{className:"font-bold text-blue-400",children:r.humanPlayers})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"AI Players:"}),(0,a.jsx)("span",{className:"font-bold text-orange-400",children:r.aiPlayers})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Mafia Remaining:"}),(0,a.jsxs)("span",{className:"font-bold text-red-400",children:[r.aliveMafia,"/",r.totalMafia]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Game Duration:"}),(0,a.jsxs)("span",{className:"font-bold text-green-400",children:[r.gameDuration,"m"]})]}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{className:"border-gray-700"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-400",children:"Your Performance"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Role:"}),(0,a.jsx)("span",{className:"capitalize",children:t.role?.replace("_"," ")})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,a.jsx)("span",{className:t.isAlive?"text-green-400":"text-red-400",children:t.isAlive?"Alive":"Eliminated"})]})]})]})]})]})]}),"game_over"===e.phase&&(0,a.jsxs)("div",{className:"glass-card p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Game Summary"}),(0,a.jsxs)("div",{className:"text-gray-300 space-y-2",children:[(0,a.jsxs)("p",{children:["This ",r.currentRound,"-round game lasted"," ",r.gameDuration," minutes with ",r.totalMessages," ","messages exchanged and ",r.totalVotes," votes cast."]}),(0,a.jsxs)("p",{children:[r.aiPlayers," AI personalities played alongside"," ",r.humanPlayers," human players."]}),c&&(0,a.jsxs)("p",{className:`font-semibold ${c.color}`,children:["The ",c.winner," achieved victory through superior strategy and deduction!"]})]})]})]}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-700 text-center",children:(0,a.jsx)("button",{onClick:s,className:"btn-detective px-8 py-3",children:"Close Statistics"})})]})})})}let J=e=>{let t,s=new Set,a=(e,a)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,i={setState:a,getState:r,getInitialState:()=>l,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},l=t=e(a,r,i);return i},Z=e=>e?J(e):J;var B=s(9733);let{useDebugValue:K}=r,{useSyncExternalStoreWithSelector:X}=B,Q=!1,ee=e=>e,et=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?Z(e):e,s=(e,s)=>(function(e,t=ee,s){s&&!Q&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Q=!0);let a=X(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return K(a),a})(t,e,s);return Object.assign(s,t),s},es=(e=>e?et(e):et)(e=>({gameState:null,currentPlayer:null,setGameState:t=>e({gameState:t}),setCurrentPlayer:t=>e({currentPlayer:t}),clearGame:()=>e({gameState:null,currentPlayer:null})}));function ea(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(null),[k,S]=(0,r.useState)([]),[C,_]=(0,r.useState)([]),[E,T]=(0,r.useState)(0),[I,z]=(0,r.useState)(!1),[q,$]=(0,r.useState)(""),[H,F]=(0,r.useState)(""),[O,L]=(0,r.useState)(!0),[J,Z]=(0,r.useState)(!1),[B,K]=(0,r.useState)(!1),{socket:X,isConnected:Q,connectionStatus:ee}=(0,P.F)();es();let et=(0,r.useRef)(null),ea=()=>{navigator.clipboard.writeText(q),W.Ay.success("Room code copied to clipboard!")},er=e?.phase==="discussion"&&e.currentSpeaker===s?.id&&s?.isAlive===!0;return Q?I?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,a.jsx)("header",{className:"border-b border-gray-700 bg-black/20 backdrop-blur-md",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(A(),{href:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[(0,a.jsx)(w.default,{src:"/detective-logo.png",alt:"AI Mafia",width:40,height:40,className:"rounded-lg"}),(0,a.jsx)("span",{className:"text-xl font-bold text-gradient",children:"AI Mafia"})]}),q&&(0,a.jsxs)("div",{className:"glass-card px-4 py-2 flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Room:"}),(0,a.jsx)("span",{className:"text-lg font-bold text-blue-400",children:q}),(0,a.jsx)("button",{onClick:ea,className:"p-1 hover:bg-blue-500/20 rounded transition-colors",title:"Copy room code",children:(0,a.jsx)(c,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{navigator.share?navigator.share({title:"Join my AI Mafia game!",text:`Join me in playing AI Mafia! Room code: ${q}`,url:window.location.href}):ea()},className:"p-1 hover:bg-blue-500/20 rounded transition-colors",title:"Share room",children:(0,a.jsx)(o,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[e&&(0,a.jsxs)("div",{className:"glass-card px-4 py-2 flex items-center gap-3",children:[(0,a.jsx)(R,{phase:e.phase}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d,{className:"w-4 h-4 text-orange-400"}),(0,a.jsx)("span",{className:"font-mono text-orange-400",children:(e=>{let t=Math.floor(e/1e3),s=Math.floor(t/60);return`${s}:${(t%60).toString().padStart(2,"0")}`})(E)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>L(!O),className:`p-2 rounded-lg transition-colors ${O?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-400"}`,title:O?"Disable sound":"Enable sound",children:O?(0,a.jsx)(m,{className:"w-5 h-5"}):(0,a.jsx)(x,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>Z(!J),className:`p-2 rounded-lg transition-colors ${J?"bg-red-500/20 text-red-400":"bg-gray-700 text-gray-400"}`,title:J?"Disable microphone":"Enable microphone",children:J?(0,a.jsx)(h,{className:"w-5 h-5"}):(0,a.jsx)(u,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>K(!B),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Game statistics",children:(0,a.jsx)(p,{className:"w-5 h-5"})}),(0,a.jsxs)("button",{onClick:()=>{X&&(X.emit("leave_room"),z(!1),t(null),n(null),S([]),_([]),$(""))},className:"btn-danger px-4 py-2 text-sm flex items-center gap-2",children:[(0,a.jsx)(g,{className:"w-4 h-4"}),"Leave Game"]})]})]})]})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto p-4 grid grid-cols-1 lg:grid-cols-4 gap-6 min-h-[calc(100vh-120px)]",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,a.jsxs)("div",{className:"glass-card p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"w-5 h-5 text-blue-400"}),"Players (",e?.players.length||0,"/10)"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e?.players.map(t=>(0,a.jsx)(M,{player:t,isCurrentPlayer:t.id===s?.id,currentSpeaker:e.currentSpeaker===t.id,showRole:"game_over"===e.phase||!t.isAlive},t.id))})]}),s&&(0,a.jsxs)("div",{className:"glass-card p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Your Role"}),(0,a.jsxs)("div",{className:"text-center",children:["mafia_leader"===s.role&&(0,a.jsxs)("div",{className:"badge-mafia p-3 text-base",children:[(0,a.jsx)(b.A,{className:"w-5 h-5 inline mr-2"}),"Mafia Leader"]}),"mafia_member"===s.role&&(0,a.jsxs)("div",{className:"badge-mafia p-3 text-base",children:[(0,a.jsx)(f,{className:"w-5 h-5 inline mr-2"}),"Mafia Member"]}),"healer"===s.role&&(0,a.jsxs)("div",{className:"badge-healer p-3 text-base",children:[(0,a.jsx)(j.A,{className:"w-5 h-5 inline mr-2"}),"Healer"]}),"citizen"===s.role&&(0,a.jsxs)("div",{className:"badge-citizen p-3 text-base",children:[(0,a.jsx)(y.A,{className:"w-5 h-5 inline mr-2"}),"Citizen"]})]}),"mafia_leader"===s.role&&(0,a.jsx)("p",{className:"text-sm text-red-300 mt-2 text-center",children:"You choose who to eliminate each night. Work with your mafia partner!"}),"mafia_member"===s.role&&(0,a.jsx)("p",{className:"text-sm text-red-300 mt-2 text-center",children:"Support your Mafia Leader and help stay hidden!"}),"healer"===s.role&&(0,a.jsx)("p",{className:"text-sm text-green-300 mt-2 text-center",children:"Protect someone each night from elimination!"}),"citizen"===s.role&&(0,a.jsx)("p",{className:"text-sm text-blue-300 mt-2 text-center",children:"Find and eliminate the mafia members!"})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,a.jsxs)("div",{className:"glass-card h-96 flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,a.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,a.jsx)(v,{className:"w-5 h-5 text-blue-400"}),"Game Chat",e?.phase==="discussion"&&e.currentSpeaker&&(0,a.jsxs)("span",{className:"text-sm text-orange-400",children:["(",e.players.find(t=>t.id===e.currentSpeaker)?.name,"'s turn)"]})]})}),(0,a.jsx)(D,{messages:k,players:e?.players||[],gamePhase:e?.phase,canSendMessage:er}),(0,a.jsx)("div",{ref:et})]}),(0,a.jsxs)(i.N,{mode:"wait",children:[e?.phase==="voting"&&s?.isAlive&&(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-card p-4",children:(0,a.jsx)(V,{players:e.players.filter(e=>e.isAlive&&e.id!==s?.id),currentVoter:e.currentSpeaker===s?.id,onVoteAction:(e,t)=>{X&&X.emit("game_action",{type:"CAST_VOTE",targetId:e,reasoning:t})}})},"voting"),e?.phase==="night"&&s?.isAlive&&("mafia_leader"===s.role||"healer"===s.role)&&(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-card p-4",children:(0,a.jsx)(G,{role:s.role,players:e.players.filter(e=>e.isAlive&&("healer"===s.role||"mafia_leader"!==e.role&&"mafia_member"!==e.role)),onActionPerformed:(e,t)=>{X&&X.emit("game_action",{type:"NIGHT_ACTION",action:e,targetId:t})}})},"night-action")]})]}),(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[e&&(0,a.jsxs)("div",{className:"glass-card p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Game Status"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Round:"}),(0,a.jsx)("span",{className:"font-bold text-blue-400",children:e.currentRound})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Alive:"}),(0,a.jsx)("span",{className:"font-bold text-green-400",children:e.players.filter(e=>e.isAlive).length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Eliminated:"}),(0,a.jsx)("span",{className:"font-bold text-red-400",children:e.eliminatedPlayers.length})]}),"waiting"!==e.phase&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Phase:"}),(0,a.jsx)("span",{className:"font-bold text-orange-400 capitalize",children:e.phase.replace("_"," ")})]})]})]}),C.length>0&&(0,a.jsxs)("div",{className:"glass-card p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:[(0,a.jsx)(N,{className:"w-5 h-5 text-orange-400"}),"Current Votes"]}),(0,a.jsx)("div",{className:"space-y-2 text-sm max-h-32 overflow-y-auto",children:C.map((t,s)=>{let r=e?.players.find(e=>e.id===t.voterId),i=e?.players.find(e=>e.id===t.targetId);return(0,a.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,a.jsx)("span",{children:r?.name}),(0,a.jsx)("span",{className:"text-gray-400",children:"→"}),(0,a.jsx)("span",{className:"text-red-400",children:i?.name})]},s)})})]}),(0,a.jsxs)("div",{className:"glass-card p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-3",children:"How to Play"}),(0,a.jsxs)("div",{className:"text-sm text-gray-400 space-y-2",children:[(0,a.jsxs)("p",{children:["\uD83D\uDD75️‍♂️ ",(0,a.jsx)("strong",{children:"Citizens:"})," Find and eliminate the mafia"]}),(0,a.jsxs)("p",{children:["\uD83D\uDD74️ ",(0,a.jsx)("strong",{children:"Mafia:"})," Eliminate citizens without being caught"]}),(0,a.jsxs)("p",{children:["\uD83D\uDEE1️ ",(0,a.jsx)("strong",{children:"Healer:"})," Protect players from elimination"]}),(0,a.jsxs)("p",{children:["\uD83E\uDD16 ",(0,a.jsx)("strong",{children:"AI Players:"})," Some players are AI - can you tell?"]})]})]})]})]}),(0,a.jsx)(i.N,{children:B&&e&&(0,a.jsx)(Y,{gameState:e,currentPlayer:s,onCloseAction:()=>K(!1)})})]}):(0,a.jsx)(U,{onGameStartAction:()=>z(!0)}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"glass-card p-8 text-center max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 animate-pulse"}),(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Connecting to Game Server"}),(0,a.jsxs)("p",{className:"text-gray-400 mb-6",children:["connecting"===ee&&"Establishing connection...","error"===ee&&"Connection failed. Retrying...","disconnected"===ee&&"Disconnected. Attempting to reconnect..."]}),(0,a.jsxs)("div",{className:"loading-dots justify-center",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]})]})})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},907:(e,t,s)=>{"use strict";var a=s(3210),r=s(7379),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=r.useSyncExternalStore,n=a.useRef,c=a.useEffect,o=a.useMemo,d=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,a,r){var m=n(null);if(null===m.current){var x={hasValue:!1,value:null};m.current=x}else x=m.current;var h=l(e,(m=o(function(){function e(e){if(!c){if(c=!0,l=e,e=a(e),void 0!==r&&x.hasValue){var t=x.value;if(r(t,e))return n=t}return n=e}if(t=n,i(l,e))return t;var s=a(e);return void 0!==r&&r(t,s)?(l=e,t):(l=e,n=s)}var l,n,c=!1,o=void 0===s?null:s;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,s,a,r]))[0],m[1]);return c(function(){x.hasValue=!0,x.value=h},[h]),d(h),h}},1135:()=>{},1366:(e,t,s)=>{"use strict";s.d(t,{F:()=>n,SocketProvider:()=>c});var a=s(687),r=s(3210);s(7405);var i=s(7590);let l=(0,r.createContext)(null);function n(){let e=(0,r.useContext)(l);if(!e)throw Error("useSocket must be used within a SocketProvider");return e}function c({children:e}){let[t,s]=(0,r.useState)(null),[n,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)("disconnected"),[m,x]=(0,r.useState)(null);return(0,a.jsx)(l.Provider,{value:{socket:t,isConnected:n,connectionStatus:o,serverStats:m,joinRoom:(e,s)=>{if(!t)return void i.Ay.error("Not connected to server");t.emit("join_room",{roomCode:e.toUpperCase(),playerName:s.trim()})},createRoom:(e,s={})=>{if(!t)return void i.Ay.error("Not connected to server");t.emit("create_room",{playerName:e.trim(),roomSettings:{allowSpectators:!1,premiumModelsEnabled:!1,...s}})},sendMessage:e=>{if(!t)return void i.Ay.error("Not connected to server");t.emit("game_action",{type:"SEND_MESSAGE",content:e.trim()})},castVote:(e,s)=>{if(!t)return void i.Ay.error("Not connected to server");t.emit("game_action",{type:"CAST_VOTE",targetId:e,reasoning:s.trim()})},nightAction:(e,s)=>{if(!t)return void i.Ay.error("Not connected to server");t.emit("game_action",{type:"NIGHT_ACTION",action:e,targetId:s})},disconnect:()=>{t&&(t.disconnect(),s(null),c(!1),d("disconnected"))}},children:e})}},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1696:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6444,23)),Promise.resolve().then(s.t.bind(s,6042,23)),Promise.resolve().then(s.t.bind(s,8170,23)),Promise.resolve().then(s.t.bind(s,9477,23)),Promise.resolve().then(s.t.bind(s,9345,23)),Promise.resolve().then(s.t.bind(s,2089,23)),Promise.resolve().then(s.t.bind(s,6577,23)),Promise.resolve().then(s.t.bind(s,1307,23))},1820:e=>{"use strict";e.exports=require("os")},2579:(e,t,s)=>{Promise.resolve().then(s.bind(s,7590)),Promise.resolve().then(s.bind(s,1366))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3332:(e,t,s)=>{"use strict";var a=s(3210),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useState,l=a.useEffect,n=a.useLayoutEffect,c=a.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!r(e,s)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=i({inst:{value:s,getSnapshot:t}}),r=a[0].inst,d=a[1];return n(function(){r.value=s,r.getSnapshot=t,o(r)&&d({inst:r})},[e,s,t]),l(function(){return o(r)&&d({inst:r}),e(function(){o(r)&&d({inst:r})})},[e]),c(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},3555:(e,t,s)=>{Promise.resolve().then(s.bind(s,29))},3873:e=>{"use strict";e.exports=require("path")},3971:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o});var a=s(5239),r=s(8088),i=s(8170),l=s.n(i),n=s(893),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let o={children:["",{children:["play",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,29)),"/home/ahiya/Ahiya/full_projects/mafia-ai-frontend/src/app/play/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"/home/ahiya/Ahiya/full_projects/mafia-ai-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/home/ahiya/Ahiya/full_projects/mafia-ai-frontend/src/app/play/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/play/page",pathname:"/play",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>c});var a=s(7413),r=s(396),i=s.n(r);s(1135);var l=s(5625),n=s(424);let c={title:"AI Mafia - The Ultimate Social Deduction Experience",description:"Play Mafia with cutting-edge AI personalities. Experience the future of social deduction gaming with premium AI opponents that think, deceive, and strategize like humans.",keywords:["mafia","social deduction","ai","game","multiplayer","strategy","detective"],authors:[{name:"AI Mafia Team"}],icons:{icon:"/detective-logo.png",shortcut:"/detective-logo.png",apple:"/detective-logo.png"},openGraph:{title:"AI Mafia - The Ultimate Social Deduction Experience",description:"Play Mafia with cutting-edge AI personalities that think and deceive like humans.",url:"https://mafia-ai.xyz",siteName:"AI Mafia",images:[{url:"/detective-logo.png",width:512,height:512,alt:"AI Mafia Detective Logo"}],locale:"en_US",type:"website"},twitter:{card:"summary_large_image",title:"AI Mafia - The Ultimate Social Deduction Experience",description:"Play Mafia with cutting-edge AI personalities that think and deceive like humans.",images:["/detective-logo.png"],creator:"@AImafia"},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}},verification:{google:"your-google-verification-code"}};function o({children:e}){return(0,a.jsx)("html",{lang:"en",className:i().variable,children:(0,a.jsx)("body",{className:"antialiased",children:(0,a.jsxs)(n.SocketProvider,{children:[e,(0,a.jsx)(l.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--noir-gray-800)",color:"white",border:"1px solid var(--detective-blue)",borderRadius:"12px",boxShadow:"var(--glow-blue)"},success:{iconTheme:{primary:"var(--healer-green)",secondary:"white"}},error:{iconTheme:{primary:"var(--mafia-red)",secondary:"white"}}}})]})})})}},4631:e=>{"use strict";e.exports=require("tls")},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6555:(e,t,s)=>{Promise.resolve().then(s.bind(s,5625)),Promise.resolve().then(s.bind(s,424))},7379:(e,t,s)=>{"use strict";e.exports=s(3332)},7627:(e,t,s)=>{Promise.resolve().then(s.bind(s,647))},7910:e=>{"use strict";e.exports=require("stream")},7990:()=>{},8354:e=>{"use strict";e.exports=require("util")},8544:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6346,23)),Promise.resolve().then(s.t.bind(s,7924,23)),Promise.resolve().then(s.t.bind(s,5656,23)),Promise.resolve().then(s.t.bind(s,99,23)),Promise.resolve().then(s.t.bind(s,8243,23)),Promise.resolve().then(s.t.bind(s,8827,23)),Promise.resolve().then(s.t.bind(s,2763,23)),Promise.resolve().then(s.t.bind(s,7173,23))},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9551:e=>{"use strict";e.exports=require("url")},9646:e=>{"use strict";e.exports=require("child_process")},9727:()=>{},9733:(e,t,s)=>{"use strict";e.exports=s(907)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[355,607],()=>s(3971));module.exports=a})();