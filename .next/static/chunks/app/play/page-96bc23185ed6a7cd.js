(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[833],{5194:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>K});var t=a(5155),l=a(2115),r=a(760),n=a(8918),i=a(4236),c=a(9987),o=a(1073),d=a(5740),m=a(6782),x=a(8610),h=a(3502),u=a(3388),g=a(9046),p=a(403),j=a(2226),y=a(3248),b=a(3408),v=a(9489),f=a(4959),N=a(6766),w=a(6874),A=a.n(w),P=a(7316),C=a(3340),S=a(477);function _(e){let{player:s,isCurrentPlayer:a,currentSpeaker:l,showRole:r}=e;return(0,t.jsxs)(n.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"\n        player-card relative overflow-hidden\n        ".concat(a?"ring-2 ring-blue-400":"","\n        ").concat(l?"ring-2 ring-orange-400 ring-pulse":"","\n        ").concat(!s.isAlive?"eliminated":"alive","\n        ").concat(r&&s.role?(()=>{switch(s.role){case"mafia_leader":case"mafia_member":return"border-red-500 bg-red-500/10";case"healer":return"border-green-500 bg-green-500/10";case"citizen":return"border-blue-500 bg-blue-500/10";default:return"border-gray-500 bg-gray-500/10"}})():"","\n      "),children:[l&&(0,t.jsx)(n.P.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},className:"absolute top-2 right-2 w-3 h-3 bg-orange-400 rounded-full"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"\n            w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold\n            ".concat("ai"===s.type?"bg-orange-500/20 text-orange-400":"bg-blue-500/20 text-blue-400","\n          "),children:"ai"===s.type?(0,t.jsx)(C.A,{className:"w-5 h-5"}):(0,t.jsx)(S.A,{className:"w-5 h-5"})}),!s.isAlive&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(y.A,{className:"w-2 h-2 text-white"})})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium truncate ".concat(s.isAlive?"text-white":"text-gray-500"),children:s.name}),a&&(0,t.jsx)("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded",children:"You"})]}),r&&s.role&&(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(()=>{switch(s.role){case"mafia_leader":return(0,t.jsx)(j.A,{className:"w-4 h-4"});case"mafia_member":return(0,t.jsx)(y.A,{className:"w-4 h-4"});case"healer":return(0,t.jsx)(b.A,{className:"w-4 h-4"});case"citizen":return(0,t.jsx)(p.A,{className:"w-4 h-4"});default:return null}})(),(0,t.jsx)("span",{className:"text-xs capitalize",children:s.role.replace("_"," ")})]}),"ai"===s.type&&(0,t.jsx)("div",{className:"text-xs text-orange-400 mt-1",children:"AI Player"})]}),l&&(0,t.jsx)(x.A,{className:"w-4 h-4 text-orange-400 animate-pulse"})]}),s.votedFor&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["Voted for: ",(0,t.jsx)("span",{className:"text-red-400",children:s.votedFor})]})]})}var k=a(9023),T=a(8681);function D(e){let{messages:s,players:a,gamePhase:i,canSendMessage:c}=e,[o,d]=(0,l.useState)(""),[m,x]=(0,l.useState)(!1),{sendMessage:h}=(0,P.F)(),u=(0,l.useRef)(null),g=()=>{o.trim()&&c&&(h(o),d(""))},p=e=>{d(s=>s+e),x(!1)},j=e=>{var s;return(null==(s=a.find(s=>s.id===e))?void 0:s.name)||"Unknown"},y=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(0,t.jsx)(r.N,{children:s.map(e=>(0,t.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"message ".concat("system"===e.messageType?"system":""),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"font-semibold text-sm",children:"system"===e.messageType?"\uD83C\uDFAE System":j(e.playerId)}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:y(e.timestamp)})]}),(0,t.jsx)("div",{className:"text-gray-200",children:e.content})]},e.id))}),(0,t.jsx)("div",{ref:u})]}),(0,t.jsx)("div",{className:"border-t border-gray-700 p-4",children:c?(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:"Type your message...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white resize-none focus:outline-none focus:border-blue-500",rows:1,maxLength:500}),(0,t.jsx)("button",{onClick:()=>x(!m),className:"absolute right-2 top-2 p-1 hover:bg-gray-700 rounded",children:(0,t.jsx)(k.A,{className:"w-4 h-4 text-gray-400"})}),m&&(0,t.jsx)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"absolute bottom-full right-0 mb-2 glass-card p-3",children:(0,t.jsx)("div",{className:"grid grid-cols-6 gap-2",children:["\uD83D\uDE00","\uD83D\uDE02","\uD83E\uDD14","\uD83D\uDE31","\uD83E\uDD28","\uD83D\uDE20","\uD83D\uDC4D","\uD83D\uDC4E","❤️","\uD83D\uDC80","\uD83D\uDD75️‍♂️","\uD83C\uDFAF"].map(e=>(0,t.jsx)("button",{onClick:()=>p(e),className:"p-2 hover:bg-gray-700 rounded text-lg",children:e},e))})})]}),(0,t.jsx)("button",{onClick:g,disabled:!o.trim(),className:"btn-detective px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)(T.A,{className:"w-4 h-4"})})]}):(0,t.jsx)("div",{className:"text-center text-gray-500 py-4",children:"discussion"===i?"Wait for your turn to speak":"Discussion not active"})})]})}var E=a(520),R=a(217),M=a(3253);function I(e){let{phase:s}=e,a=(()=>{switch(s){case"waiting":return{icon:(0,t.jsx)(o.A,{className:"w-5 h-5"}),name:"Waiting",color:"text-gray-400",bg:"bg-gray-500/20"};case"night":return{icon:(0,t.jsx)(E.A,{className:"w-5 h-5"}),name:"Night",color:"text-purple-400",bg:"bg-purple-500/20"};case"revelation":return{icon:(0,t.jsx)(R.A,{className:"w-5 h-5"}),name:"Revelation",color:"text-yellow-400",bg:"bg-yellow-500/20"};case"discussion":return{icon:(0,t.jsx)(v.A,{className:"w-5 h-5"}),name:"Discussion",color:"text-blue-400",bg:"bg-blue-500/20"};case"voting":return{icon:(0,t.jsx)(f.A,{className:"w-5 h-5"}),name:"Voting",color:"text-orange-400",bg:"bg-orange-500/20"};case"game_over":return{icon:(0,t.jsx)(M.A,{className:"w-5 h-5"}),name:"Game Over",color:"text-green-400",bg:"bg-green-500/20"};default:return{icon:(0,t.jsx)(o.A,{className:"w-5 h-5"}),name:"Unknown",color:"text-gray-400",bg:"bg-gray-500/20"}}})();return(0,t.jsxs)(n.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"flex items-center gap-2 px-3 py-1 rounded-full ".concat(a.bg," ").concat(a.color),children:[(0,t.jsx)(n.P.div,{animate:{rotate:360*("night"===s)},transition:{duration:2,repeat:"night"===s?1/0:0},children:a.icon}),(0,t.jsx)("span",{className:"font-semibold",children:a.name})]},s)}var G=a(936);function z(e){var s;let{players:a,currentVoter:r,onVoteAction:i}=e,[c,o]=(0,l.useState)(""),[d,m]=(0,l.useState)("");return r?(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(f.A,{className:"w-12 h-12 text-orange-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"Cast Your Vote"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Choose who you think should be eliminated"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Who do you want to eliminate?"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:a.map(e=>(0,t.jsx)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(e.id),className:"\n                p-3 rounded-lg border-2 transition-all text-left\n                ".concat(c===e.id?"border-orange-500 bg-orange-500/20 text-orange-400":"border-gray-600 bg-gray-800 hover:border-gray-500","\n              "),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"font-medium",children:e.name}),"ai"===e.type&&(0,t.jsx)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded",children:"AI"})]})},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Explain your reasoning"}),(0,t.jsx)("textarea",{value:d,onChange:e=>m(e.target.value),placeholder:"Why do you think this player should be eliminated?",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white resize-none focus:outline-none focus:border-orange-500",rows:3,maxLength:200}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[d.length,"/200 characters"]})]}),(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{c&&d.trim()&&(i(c,d),o(""),m(""))},disabled:!c||!d.trim(),className:"w-full btn-detective py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,t.jsx)(G.A,{className:"w-5 h-5"}),"Cast Vote to Eliminate"]}),c&&d.trim()&&(0,t.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"glass-card p-3 text-center text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"You are voting to eliminate: "}),(0,t.jsx)("span",{className:"text-orange-400 font-semibold",children:null==(s=a.find(e=>e.id===c))?void 0:s.name})]})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(f.A,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Voting Phase"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Wait for your turn to vote"})]})}var F=a(8208);function V(e){var s;let{role:a,players:r,onActionPerformed:i}=e,[c,o]=(0,l.useState)(""),d="mafia_leader"===a?{icon:(0,t.jsx)(y.A,{className:"w-12 h-12 text-red-400"}),title:"Choose Your Target",description:"Select a player to eliminate tonight",buttonText:"Eliminate Player",buttonClass:"btn-danger",color:"red"}:{icon:(0,t.jsx)(b.A,{className:"w-12 h-12 text-green-400"}),title:"Choose Who to Protect",description:"Select a player to protect from elimination",buttonText:"Protect Player",buttonClass:"btn-detective",color:"green"};return(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(E.A,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),(0,t.jsx)("div",{className:"mb-4",children:d.icon}),(0,t.jsx)("h3",{className:"text-2xl font-bold mb-2",children:d.title}),(0,t.jsx)("p",{className:"text-gray-400",children:d.description})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Available targets:"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3 max-h-48 overflow-y-auto",children:r.map(e=>(0,t.jsx)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(e.id),className:"\n                p-3 rounded-lg border-2 transition-all text-left\n                ".concat(c===e.id?"border-".concat(d.color,"-500 bg-").concat(d.color,"-500/20 text-").concat(d.color,"-400"):"border-gray-600 bg-gray-800 hover:border-gray-500","\n              "),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"font-medium",children:e.name}),"ai"===e.type&&(0,t.jsx)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded",children:"AI"})]})},e.id))})]}),(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{c&&(i("mafia_leader"===a?"kill":"heal",c),o(""))},disabled:!c,className:"w-full ".concat(d.buttonClass," py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"),children:[d.icon,d.buttonText]}),c&&(0,t.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"glass-card p-3 text-center text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Target selected: "}),(0,t.jsx)("span",{className:"text-".concat(d.color,"-400 font-semibold"),children:null==(s=r.find(e=>e.id===c))?void 0:s.name})]})]})}var H=a(4266),O=a(8533),W=a(502),Y=a(3568);function L(e){let{onGameStartAction:s}=e,[a,r]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[o,d]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),[h,u]=(0,l.useState)("single"),[g,y]=(0,l.useState)(!1),{createRoom:b,joinRoom:v,isConnected:f}=(0,P.F)(),w=async()=>{if(!a.trim())return void Y.Ay.error("Please enter your name");if(a.trim().length<2)return void Y.Ay.error("Name must be at least 2 characters");d(!0);try{b(a.trim(),{premiumModelsEnabled:g,gameMode:h}),s()}catch(e){Y.Ay.error("Failed to create room"),d(!1)}},A=async()=>{if(!a.trim())return void Y.Ay.error("Please enter your name");if(!i.trim())return void Y.Ay.error("Please enter room code");if(6!==i.trim().length)return void Y.Ay.error("Room code must be 6 digits");x(!0);try{v(i.toUpperCase(),a.trim()),s()}catch(e){Y.Ay.error("Failed to join room"),x(!1)}},S=[{id:"single",name:"Single Player",description:"1 Human + 9 AI Players",icon:(0,t.jsx)(j.A,{className:"w-6 h-6"}),recommended:!0,features:["Perfect for beginners","Practice AI detection","Instant start"]},{id:"multiplayer",name:"Multiplayer",description:"2-10 Humans + AI Fill",icon:(0,t.jsx)(p.A,{className:"w-6 h-6"}),recommended:!1,features:["Play with friends","Dynamic AI backfill","Social experience"]}];return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,t.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},className:"text-center mb-12",children:[(0,t.jsx)("div",{className:"flex justify-center mb-6",children:(0,t.jsx)(n.P.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},children:(0,t.jsx)(N.default,{src:"/detective-logo.png",alt:"AI Mafia Detective",width:80,height:80,className:"drop-shadow-2xl"})})}),(0,t.jsx)("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:(0,t.jsx)("span",{className:"text-gradient",children:"Ready to Play?"})}),(0,t.jsx)("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Join the ultimate social deduction experience with AI personalities"})]}),(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Choose Your Game Mode"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(e=>(0,t.jsxs)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u(e.id),className:"\n                  game-card text-left p-6 transition-all\n                  ".concat(h===e.id?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-blue-400","\n                "),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg ".concat(h===e.id?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-400"),children:e.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold",children:e.name}),e.recommended&&(0,t.jsx)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded mt-1 inline-block",children:"Recommended"})]})]}),(0,t.jsx)("p",{className:"text-gray-400 mb-4",children:e.description}),(0,t.jsx)("div",{className:"space-y-2",children:e.features.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(H.A,{className:"w-3 h-3 text-blue-400"}),(0,t.jsx)("span",{children:e})]},s))})]},e.id))})]}),(0,t.jsxs)(n.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-card p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("label",{className:"block text-lg font-semibold mb-3",children:"Your Detective Name"}),(0,t.jsx)("input",{type:"text",value:a,onChange:e=>r(e.target.value),placeholder:"Enter your name (2-20 characters)",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white text-lg focus:outline-none focus:border-blue-500 transition-colors",maxLength:20,disabled:o||m}),(0,t.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"This name will be visible to other players"})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-800/50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(C.A,{className:"w-5 h-5 text-orange-400"}),(0,t.jsx)("span",{className:"font-semibold",children:"Premium AI Models"}),(0,t.jsx)("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded",children:"Beta"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Enable Claude Sonnet 4, GPT-4o, and Gemini 2.5 Pro for enhanced AI personalities"})]}),(0,t.jsx)("button",{onClick:()=>y(!g),className:"\n                  relative w-14 h-8 rounded-full transition-colors\n                  ".concat(g?"bg-blue-500":"bg-gray-600","\n                "),children:(0,t.jsx)(n.P.div,{animate:{x:g?24:4},className:"absolute top-1 w-6 h-6 bg-white rounded-full"})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(O.A,{className:"w-5 h-5 text-green-400"}),"Create New Game"]}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Start a new room and invite friends with a room code"}),(0,t.jsx)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:w,disabled:!a.trim()||!f||o,className:"w-full btn-detective py-4 text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"loading-dots",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]}),"Creating Room..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.A,{className:"w-5 h-5"}),"Create & Start Playing"]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"w-5 h-5 text-blue-400"}),"Join Existing Game"]}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Enter a 6-digit room code to join a friend's game"}),(0,t.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value.toUpperCase()),placeholder:"ROOM CODE",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-center text-2xl font-mono tracking-widest focus:outline-none focus:border-blue-500 transition-colors",maxLength:6,disabled:o||m}),(0,t.jsx)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:A,disabled:!a.trim()||!i.trim()||!f||m,className:"w-full btn-secondary py-4 text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"loading-dots",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]}),"Joining Room..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"w-5 h-5"}),"Join Game"]})})]})]}),!f&&(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"}),"Not connected to game server"]})})]}),(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-8 text-center text-gray-500 text-sm",children:(0,t.jsx)("p",{children:"\uD83D\uDD75️‍♂️ AI players are disguised with human names • \uD83E\uDD16 Can you detect them all?"})})]})})}var J=a(4139);function U(e){var s;let{gameState:a,currentPlayer:l,onCloseAction:i}=e,c=(()=>{var e,s;let t=a.players.length,l=a.players.filter(e=>e.isAlive).length,r=a.eliminatedPlayers.length,n=a.players.filter(e=>"ai"===e.type).length,i=a.players.filter(e=>"human"===e.type).length,c=a.players.filter(e=>"mafia_leader"===e.role||"mafia_member"===e.role),o=c.filter(e=>e.isAlive).length,d=new Date(a.phaseStartTime),m=Math.floor((new Date().getTime()-d.getTime())/1e3/60);return{totalPlayers:t,alivePlayers:l,eliminatedPlayers:r,aiPlayers:n,humanPlayers:i,aliveMafia:o,totalMafia:c.length,gameDuration:m,currentRound:a.currentRound,totalMessages:(null==(e=a.messages)?void 0:e.length)||0,totalVotes:(null==(s=a.votes)?void 0:s.length)||0}})(),d=e=>{switch(e){case"mafia_leader":return(0,t.jsx)(j.A,{className:"w-4 h-4 text-red-400"});case"mafia_member":return(0,t.jsx)(y.A,{className:"w-4 h-4 text-red-400"});case"healer":return(0,t.jsx)(b.A,{className:"w-4 h-4 text-green-400"});case"citizen":return(0,t.jsx)(p.A,{className:"w-4 h-4 text-blue-400"});default:return null}},m=a.winner?{winner:a.winner,icon:"citizens"===a.winner?"\uD83D\uDC6E‍♂️":"\uD83D\uDD74️",color:"citizens"===a.winner?"text-blue-400":"text-red-400",message:"citizens"===a.winner?"Citizens successfully identified the mafia!":"Mafia achieved numerical superiority!"}:null;return(0,t.jsx)(r.N,{children:(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:i,children:(0,t.jsxs)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"glass-card w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(M.A,{className:"w-8 h-8 text-orange-400"}),(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Game Statistics"})]}),(0,t.jsx)("button",{onClick:i,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:(0,t.jsx)(J.A,{className:"w-6 h-6"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-8",children:[m&&(0,t.jsxs)(n.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center p-6 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl border border-orange-500/30",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:m.icon}),(0,t.jsx)("h3",{className:"text-3xl font-bold mb-2 ".concat(m.color),children:"citizens"===m.winner?"Citizens Win!":"Mafia Wins!"}),(0,t.jsx)("p",{className:"text-gray-300",children:m.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,t.jsx)(o.A,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:c.currentRound}),(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Rounds"})]}),(0,t.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,t.jsx)(p.A,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-400",children:c.alivePlayers}),(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Alive"})]}),(0,t.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,t.jsx)(v.A,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:c.totalMessages}),(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Messages"})]}),(0,t.jsxs)("div",{className:"glass-card p-4 text-center",children:[(0,t.jsx)(f.A,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-400",children:c.totalVotes}),(0,t.jsx)("div",{className:"text-sm text-gray-400",children:"Votes Cast"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"glass-card p-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"w-5 h-5 text-blue-400"}),"Player Status"]}),(0,t.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:a.players.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(e.isAlive?"bg-gray-700/50":"bg-red-900/20"),children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[d(e.role||""),(0,t.jsx)("span",{className:"font-medium ".concat(e.isAlive?"text-white":"text-gray-500"),children:e.name}),e.id===(null==l?void 0:l.id)&&(0,t.jsx)("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded",children:"You"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["ai"===e.type&&(0,t.jsx)(C.A,{className:"w-4 h-4 text-orange-400"}),(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.isAlive?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.isAlive?"Alive":"Eliminated"})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"glass-card p-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,t.jsx)(F.A,{className:"w-5 h-5 text-orange-400"}),"Game Breakdown"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Human Players:"}),(0,t.jsx)("span",{className:"font-bold text-blue-400",children:c.humanPlayers})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"AI Players:"}),(0,t.jsx)("span",{className:"font-bold text-orange-400",children:c.aiPlayers})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Mafia Remaining:"}),(0,t.jsxs)("span",{className:"font-bold text-red-400",children:[c.aliveMafia,"/",c.totalMafia]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Game Duration:"}),(0,t.jsxs)("span",{className:"font-bold text-green-400",children:[c.gameDuration,"m"]})]}),l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"border-gray-700"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-400",children:"Your Performance"}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Role:"}),(0,t.jsx)("span",{className:"capitalize",children:null==(s=l.role)?void 0:s.replace("_"," ")})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,t.jsx)("span",{className:l.isAlive?"text-green-400":"text-red-400",children:l.isAlive?"Alive":"Eliminated"})]})]})]})]})]})]}),"game_over"===a.phase&&(0,t.jsxs)("div",{className:"glass-card p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Game Summary"}),(0,t.jsxs)("div",{className:"text-gray-300 space-y-2",children:[(0,t.jsxs)("p",{children:["This ",c.currentRound,"-round game lasted"," ",c.gameDuration," minutes with ",c.totalMessages," ","messages exchanged and ",c.totalVotes," votes cast."]}),(0,t.jsxs)("p",{children:[c.aiPlayers," AI personalities played alongside"," ",c.humanPlayers," human players."]}),m&&(0,t.jsxs)("p",{className:"font-semibold ".concat(m.color),children:["The ",m.winner," achieved victory through superior strategy and deduction!"]})]})]})]}),(0,t.jsx)("div",{className:"p-6 border-t border-gray-700 text-center",children:(0,t.jsx)("button",{onClick:i,className:"btn-detective px-8 py-3",children:"Close Statistics"})})]})})})}let B=(0,a(8693).vt)(e=>({gameState:null,currentPlayer:null,setGameState:s=>e({gameState:s}),setCurrentPlayer:s=>e({currentPlayer:s}),clearGame:()=>e({gameState:null,currentPlayer:null})}));function K(){var e;let[s,a]=(0,l.useState)(null),[w,C]=(0,l.useState)(null),[S,k]=(0,l.useState)([]),[T,E]=(0,l.useState)([]),[R,M]=(0,l.useState)(0),[G,F]=(0,l.useState)(!1),[H,O]=(0,l.useState)(""),[W,J]=(0,l.useState)(""),[K,q]=(0,l.useState)(!0),[Q,X]=(0,l.useState)(!1),[Z,$]=(0,l.useState)(!1),{socket:ee,isConnected:es,connectionStatus:ea}=(0,P.F)(),et=B(),el=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(ee)return ee.on("room_joined",e=>{F(!0),O(e.roomCode),C({...e.player}),Y.Ay.success("Welcome to room ".concat(e.roomCode,"!"))}),ee.on("room_created",e=>{F(!0),O(e.roomCode),C({...e.player}),Y.Ay.success("Room ".concat(e.roomCode," created! Share this code with friends."))}),ee.on("game_state_update",e=>{a(e),et.setGameState(e)}),ee.on("message_received",e=>{k(s=>[...s,e.message]),K&&e.message.playerId!==(null==w?void 0:w.id)&&er("message")}),ee.on("vote_cast",e=>{E(s=>[...s,e.vote]),K&&er("vote")}),ee.on("phase_changed",e=>{K&&er("phase_change")}),ee.on("player_eliminated",e=>{K&&er("elimination")}),ee.on("game_ended",e=>{K&&er("citizens"===e.winner?"victory":"defeat"),$(!0)}),ee.on("error",e=>{Y.Ay.error(e.message)}),()=>{ee.off("room_joined"),ee.off("room_created"),ee.off("game_state_update"),ee.off("message_received"),ee.off("vote_cast"),ee.off("phase_changed"),ee.off("player_eliminated"),ee.off("game_ended"),ee.off("error")}},[ee,w,K,et]),(0,l.useEffect)(()=>{if(!(null==s?void 0:s.phaseEndTime))return;let e=()=>{M(Math.max(0,new Date(s.phaseEndTime).getTime()-Date.now()))};e();let a=setInterval(e,1e3);return()=>clearInterval(a)},[null==s?void 0:s.phaseEndTime]),(0,l.useEffect)(()=>{var e;null==(e=el.current)||e.scrollIntoView({behavior:"smooth"})},[S]);let er=e=>{if(!K)return;let s=new Audio("/sounds/".concat(e,".mp3"));s.volume=.3,s.play().catch(()=>{})},en=()=>{navigator.clipboard.writeText(H),Y.Ay.success("Room code copied to clipboard!")},ei=(null==s?void 0:s.phase)==="discussion"&&s.currentSpeaker===(null==w?void 0:w.id)&&(null==w?void 0:w.isAlive)===!0;return es?G?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,t.jsx)("header",{className:"border-b border-gray-700 bg-black/20 backdrop-blur-md",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(A(),{href:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[(0,t.jsx)(N.default,{src:"/detective-logo.png",alt:"AI Mafia",width:40,height:40,className:"rounded-lg"}),(0,t.jsx)("span",{className:"text-xl font-bold text-gradient",children:"AI Mafia"})]}),H&&(0,t.jsxs)("div",{className:"glass-card px-4 py-2 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Room:"}),(0,t.jsx)("span",{className:"text-lg font-bold text-blue-400",children:H}),(0,t.jsx)("button",{onClick:en,className:"p-1 hover:bg-blue-500/20 rounded transition-colors",title:"Copy room code",children:(0,t.jsx)(i.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{navigator.share?navigator.share({title:"Join my AI Mafia game!",text:"Join me in playing AI Mafia! Room code: ".concat(H),url:window.location.href}):en()},className:"p-1 hover:bg-blue-500/20 rounded transition-colors",title:"Share room",children:(0,t.jsx)(c.A,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[s&&(0,t.jsxs)("div",{className:"glass-card px-4 py-2 flex items-center gap-3",children:[(0,t.jsx)(I,{phase:s.phase}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 text-orange-400"}),(0,t.jsx)("span",{className:"font-mono text-orange-400",children:(e=>{let s=Math.floor(e/1e3),a=Math.floor(s/60);return"".concat(a,":").concat((s%60).toString().padStart(2,"0"))})(R)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>q(!K),className:"p-2 rounded-lg transition-colors ".concat(K?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-400"),title:K?"Disable sound":"Enable sound",children:K?(0,t.jsx)(d.A,{className:"w-5 h-5"}):(0,t.jsx)(m.A,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>X(!Q),className:"p-2 rounded-lg transition-colors ".concat(Q?"bg-red-500/20 text-red-400":"bg-gray-700 text-gray-400"),title:Q?"Disable microphone":"Enable microphone",children:Q?(0,t.jsx)(x.A,{className:"w-5 h-5"}):(0,t.jsx)(h.A,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>$(!Z),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",title:"Game statistics",children:(0,t.jsx)(u.A,{className:"w-5 h-5"})}),(0,t.jsxs)("button",{onClick:()=>{ee&&(ee.emit("leave_room"),F(!1),a(null),C(null),k([]),E([]),O(""))},className:"btn-danger px-4 py-2 text-sm flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"w-4 h-4"}),"Leave Game"]})]})]})]})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto p-4 grid grid-cols-1 lg:grid-cols-4 gap-6 min-h-[calc(100vh-120px)]",children:[(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,t.jsxs)("div",{className:"glass-card p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"w-5 h-5 text-blue-400"}),"Players (",(null==s?void 0:s.players.length)||0,"/10)"]}),(0,t.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:null==s?void 0:s.players.map(e=>(0,t.jsx)(_,{player:e,isCurrentPlayer:e.id===(null==w?void 0:w.id),currentSpeaker:s.currentSpeaker===e.id,showRole:"game_over"===s.phase||!e.isAlive},e.id))})]}),w&&(0,t.jsxs)("div",{className:"glass-card p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Your Role"}),(0,t.jsxs)("div",{className:"text-center",children:["mafia_leader"===w.role&&(0,t.jsxs)("div",{className:"badge-mafia p-3 text-base",children:[(0,t.jsx)(j.A,{className:"w-5 h-5 inline mr-2"}),"Mafia Leader"]}),"mafia_member"===w.role&&(0,t.jsxs)("div",{className:"badge-mafia p-3 text-base",children:[(0,t.jsx)(y.A,{className:"w-5 h-5 inline mr-2"}),"Mafia Member"]}),"healer"===w.role&&(0,t.jsxs)("div",{className:"badge-healer p-3 text-base",children:[(0,t.jsx)(b.A,{className:"w-5 h-5 inline mr-2"}),"Healer"]}),"citizen"===w.role&&(0,t.jsxs)("div",{className:"badge-citizen p-3 text-base",children:[(0,t.jsx)(p.A,{className:"w-5 h-5 inline mr-2"}),"Citizen"]})]}),"mafia_leader"===w.role&&(0,t.jsx)("p",{className:"text-sm text-red-300 mt-2 text-center",children:"You choose who to eliminate each night. Work with your mafia partner!"}),"mafia_member"===w.role&&(0,t.jsx)("p",{className:"text-sm text-red-300 mt-2 text-center",children:"Support your Mafia Leader and help stay hidden!"}),"healer"===w.role&&(0,t.jsx)("p",{className:"text-sm text-green-300 mt-2 text-center",children:"Protect someone each night from elimination!"}),"citizen"===w.role&&(0,t.jsx)("p",{className:"text-sm text-blue-300 mt-2 text-center",children:"Find and eliminate the mafia members!"})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,t.jsxs)("div",{className:"glass-card h-96 flex flex-col",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,t.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"w-5 h-5 text-blue-400"}),"Game Chat",(null==s?void 0:s.phase)==="discussion"&&s.currentSpeaker&&(0,t.jsxs)("span",{className:"text-sm text-orange-400",children:["(",null==(e=s.players.find(e=>e.id===s.currentSpeaker))?void 0:e.name,"'s turn)"]})]})}),(0,t.jsx)(D,{messages:S,players:(null==s?void 0:s.players)||[],gamePhase:null==s?void 0:s.phase,canSendMessage:ei}),(0,t.jsx)("div",{ref:el})]}),(0,t.jsxs)(r.N,{mode:"wait",children:[(null==s?void 0:s.phase)==="voting"&&(null==w?void 0:w.isAlive)&&(0,t.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-card p-4",children:(0,t.jsx)(z,{players:s.players.filter(e=>e.isAlive&&e.id!==(null==w?void 0:w.id)),currentVoter:s.currentSpeaker===(null==w?void 0:w.id),onVoteAction:(e,s)=>{ee&&ee.emit("game_action",{type:"CAST_VOTE",targetId:e,reasoning:s})}})},"voting"),(null==s?void 0:s.phase)==="night"&&(null==w?void 0:w.isAlive)&&("mafia_leader"===w.role||"healer"===w.role)&&(0,t.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-card p-4",children:(0,t.jsx)(V,{role:w.role,players:s.players.filter(e=>e.isAlive&&("healer"===w.role||"mafia_leader"!==e.role&&"mafia_member"!==e.role)),onActionPerformed:(e,s)=>{ee&&ee.emit("game_action",{type:"NIGHT_ACTION",action:e,targetId:s})}})},"night-action")]})]}),(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[s&&(0,t.jsxs)("div",{className:"glass-card p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-3",children:"Game Status"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Round:"}),(0,t.jsx)("span",{className:"font-bold text-blue-400",children:s.currentRound})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Alive:"}),(0,t.jsx)("span",{className:"font-bold text-green-400",children:s.players.filter(e=>e.isAlive).length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Eliminated:"}),(0,t.jsx)("span",{className:"font-bold text-red-400",children:s.eliminatedPlayers.length})]}),"waiting"!==s.phase&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Phase:"}),(0,t.jsx)("span",{className:"font-bold text-orange-400 capitalize",children:s.phase.replace("_"," ")})]})]})]}),T.length>0&&(0,t.jsxs)("div",{className:"glass-card p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold mb-3 flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"w-5 h-5 text-orange-400"}),"Current Votes"]}),(0,t.jsx)("div",{className:"space-y-2 text-sm max-h-32 overflow-y-auto",children:T.map((e,a)=>{let l=null==s?void 0:s.players.find(s=>s.id===e.voterId),r=null==s?void 0:s.players.find(s=>s.id===e.targetId);return(0,t.jsxs)("div",{className:"flex justify-between items-center py-1",children:[(0,t.jsx)("span",{children:null==l?void 0:l.name}),(0,t.jsx)("span",{className:"text-gray-400",children:"→"}),(0,t.jsx)("span",{className:"text-red-400",children:null==r?void 0:r.name})]},a)})})]}),(0,t.jsxs)("div",{className:"glass-card p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-3",children:"How to Play"}),(0,t.jsxs)("div",{className:"text-sm text-gray-400 space-y-2",children:[(0,t.jsxs)("p",{children:["\uD83D\uDD75️‍♂️ ",(0,t.jsx)("strong",{children:"Citizens:"})," Find and eliminate the mafia"]}),(0,t.jsxs)("p",{children:["\uD83D\uDD74️ ",(0,t.jsx)("strong",{children:"Mafia:"})," Eliminate citizens without being caught"]}),(0,t.jsxs)("p",{children:["\uD83D\uDEE1️ ",(0,t.jsx)("strong",{children:"Healer:"})," Protect players from elimination"]}),(0,t.jsxs)("p",{children:["\uD83E\uDD16 ",(0,t.jsx)("strong",{children:"AI Players:"})," Some players are AI - can you tell?"]})]})]})]})]}),(0,t.jsx)(r.N,{children:Z&&s&&(0,t.jsx)(U,{gameState:s,currentPlayer:w,onCloseAction:()=>$(!1)})})]}):(0,t.jsx)(L,{onGameStartAction:()=>F(!0)}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"glass-card p-8 text-center max-w-md mx-auto",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 animate-pulse"}),(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Connecting to Game Server"}),(0,t.jsxs)("p",{className:"text-gray-400 mb-6",children:["connecting"===ea&&"Establishing connection...","error"===ea&&"Connection failed. Retrying...","disconnected"===ea&&"Disconnected. Attempting to reconnect..."]}),(0,t.jsxs)("div",{className:"loading-dots justify-center",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})]})})}},7316:(e,s,a)=>{"use strict";a.d(s,{F:()=>c,SocketProvider:()=>o});var t=a(5155),l=a(2115),r=a(4298),n=a(3568);let i=(0,l.createContext)(null);function c(){let e=(0,l.useContext)(i);if(!e)throw Error("useSocket must be used within a SocketProvider");return e}function o(e){let{children:s}=e,[a,c]=(0,l.useState)(null),[o,d]=(0,l.useState)(!1),[m,x]=(0,l.useState)("disconnected"),[h,u]=(0,l.useState)(null);return(0,l.useEffect)(()=>{x("connecting");let e=(0,r.io)("wss://mafia-ai-production.up.railway.app",{transports:["websocket","polling"],timeout:2e4,retries:3,query:{clientType:"game"}});return e.on("connect",()=>{d(!0),x("connected"),n.Ay.success("Connected to game server!",{icon:"\uD83D\uDD75️‍♂️"})}),e.on("disconnect",e=>{d(!1),x("disconnected"),"io server disconnect"===e&&n.Ay.error("Server disconnected. Attempting to reconnect...")}),e.on("connect_error",e=>{x("error"),n.Ay.error("Failed to connect to game server. Retrying...")}),e.on("reconnect",e=>{n.Ay.success("Reconnected to game server!")}),e.on("reconnect_error",e=>{n.Ay.error("Failed to reconnect. Please refresh the page.")}),e.on("room_joined",e=>{n.Ay.success("Joined room ".concat(e.roomCode,"!"),{icon:"\uD83C\uDFAE"})}),e.on("room_created",e=>{n.Ay.success("Room ".concat(e.roomCode," created!"),{icon:"\uD83C\uDFAF"})}),e.on("player_joined",e=>{(0,n.Ay)("".concat(e.player.name," joined the game"),{icon:"\uD83D\uDC4B"})}),e.on("player_left",e=>{(0,n.Ay)("A player left the game",{icon:"\uD83D\uDEAA"})}),e.on("game_started",e=>{n.Ay.success("The game has begun! Good luck, detective!",{icon:"\uD83D\uDD75️‍♂️",duration:6e3})}),e.on("phase_changed",e=>{let s={night:"Night falls... \uD83C\uDF19",revelation:"Morning reveals the truth... ☀️",discussion:"Time for discussion! \uD83D\uDCAC",voting:"Time to vote! \uD83D\uDDF3️",game_over:"Game Over! \uD83C\uDFAE"}[e.newPhase]||"Phase: ".concat(e.newPhase);(0,n.Ay)(s,{icon:"⏰",duration:3e3})}),e.on("player_eliminated",e=>{n.Ay.error("".concat(e.playerName," was eliminated! They were a ").concat(e.role),{icon:"\uD83D\uDC80",duration:8e3})}),e.on("game_ended",e=>{let s="citizens"===e.winner?"Citizens won!":"Mafia won!";n.Ay.success("Game Over! ".concat(s),{icon:"citizens"===e.winner?"\uD83D\uDC6E‍♂️":"\uD83D\uDD74️",duration:1e4})}),e.on("error",e=>{n.Ay.error(e.message||"An error occurred")}),e.on("stats_update",e=>{var s,a,t;u({totalPlayers:(null==(s=e.server)?void 0:s.activeConnections)||0,activeGames:(null==(a=e.rooms)?void 0:a.activeRooms)||0,totalRooms:(null==(t=e.rooms)?void 0:t.totalRooms)||0})}),c(e),()=>{e.disconnect()}},[]),(0,l.useEffect)(()=>{if(!a||!o)return;let e=()=>{fetch("".concat("https://mafia-ai-production.up.railway.app","/api/stats")).then(e=>e.json()).then(e=>{var s,a,t;u({totalPlayers:(null==(s=e.server)?void 0:s.activeConnections)||0,activeGames:(null==(a=e.rooms)?void 0:a.activeRooms)||0,totalRooms:(null==(t=e.rooms)?void 0:t.totalRooms)||0})}).catch(console.error)};e();let s=setInterval(e,5e3);return()=>clearInterval(s)},[a,o]),(0,t.jsx)(i.Provider,{value:{socket:a,isConnected:o,connectionStatus:m,serverStats:h,joinRoom:(e,s)=>{if(!a)return void n.Ay.error("Not connected to server");a.emit("join_room",{roomCode:e.toUpperCase(),playerName:s.trim()})},createRoom:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a)return void n.Ay.error("Not connected to server");a.emit("create_room",{playerName:e.trim(),roomSettings:{allowSpectators:!1,premiumModelsEnabled:!1,...s}})},sendMessage:e=>{if(!a)return void n.Ay.error("Not connected to server");a.emit("game_action",{type:"SEND_MESSAGE",content:e.trim()})},castVote:(e,s)=>{if(!a)return void n.Ay.error("Not connected to server");a.emit("game_action",{type:"CAST_VOTE",targetId:e,reasoning:s.trim()})},nightAction:(e,s)=>{if(!a)return void n.Ay.error("Not connected to server");a.emit("game_action",{type:"NIGHT_ACTION",action:e,targetId:s})},disconnect:()=>{a&&(a.disconnect(),c(null),d(!1),x("disconnected"))}},children:s})}},7381:(e,s,a)=>{Promise.resolve().then(a.bind(a,5194))}},e=>{var s=s=>e(e.s=s);e.O(0,[299,231,628,441,684,358],()=>s(7381)),_N_E=e.O()}]);